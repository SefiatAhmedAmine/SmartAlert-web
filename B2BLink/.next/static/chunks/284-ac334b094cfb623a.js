(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[284],{2694:function(e,l,a){"use strict";a.d(l,{Z:function(){return N}});var r=a(5893),i=a(7294);a(5671);var s=a(8615),n=a.n(s),t=a(288);let c=e=>{let[l,a]=(0,i.useState)(null),[s,n]=(0,i.useState)([]);return(0,i.useEffect)(()=>{var l;n(e.options.valeurs),(null===(l=e.options.critereon)||void 0===l?void 0:l.label)=="model"&&a(null)},[e.options.valeurs]),(0,r.jsx)(t.ZP,{value:l,onChange:l=>{console.log(e.options,l),e.onChoiceChange&&e.onChoiceChange(null,l),a(l)},options:s,isSearchable:!0,placeholder:"Select an option..."})};c.propTypes={};var o=a(4640);let d=e=>{let l=(0,o.useLocale)(),a=(0,o.useTranslations)(),[s,n]=(0,i.useState)(null),[c,d]=(0,i.useState)([]);return(0,i.useEffect)(()=>{let r=[{label:a("Common.all"),value:0}];for(let a=0;a<e.options.valeurs.length;a++){var i;let s=e.options.valeurs[a],n={label:null!==(i=s.translations[l])&&void 0!==i?i:s.value,value:s.id};r.push(n)}d(r)},[e.options]),(0,r.jsx)(t.ZP,{value:s,onChange:l=>{e.onChipChange&&e.onChipChange(e.options,l),n(l)},options:c,isSearchable:!0,placeholder:"Select an option..."})};d.propTypes={};var u=a(2729),h=a(948),m=a(5616),v=a(1181),p=a(8213),g=a(2920);function x(){let e=(0,u._)(["\n  width: 42px;\n"]);return x=function(){return e},e}let b=(0,h.ZP)(g.Z)(x());var j=e=>{let{options:l,onSliderChange:a}=e,[s,n]=(0,i.useState)([l.minValue,l.maxValue]),t={id:l.id,label:l.label},c=(0,i.useRef)(Math.pow(10,Math.min(Math.floor((s[1]-s[0]+"").length-2),3))),o=()=>{s<0?n(0):s>100&&n(100)};return(0,r.jsx)(m.Z,{sx:{display:"flex",justifyContent:"space-between",mt:2},children:(0,r.jsxs)(v.ZP,{container:!0,spacing:2,alignItems:"center",justifyContent:"space-between",children:[(0,r.jsx)(v.ZP,{item:!0,xs:3,children:(0,r.jsx)(b,{value:s[0],size:"medium",onChange:e=>{n([""===e.target.value?0:Number(e.target.value),s[1]]),a&&a(t,s)},onBlur:o,inputProps:{step:c.current,min:l.minValue,max:l.maxValue,type:"number","aria-labelledby":"input-slider"},style:{width:"100%"}})}),(0,r.jsx)(v.ZP,{item:!0,xs:6,children:(0,r.jsx)(p.ZP,{value:s,onChange:(e,l)=>{n(l),a&&a(t,s)},valueLabelDisplay:"auto",min:l.minValue,max:l.maxValue,step:c.current,style:{marginTop:10}})}),(0,r.jsx)(v.ZP,{item:!0,xs:3,children:(0,r.jsx)(b,{value:s[1],size:"medium",onChange:e=>{n([s[0],""===e.target.value?0:Number(e.target.value)]),a&&a(t,s)},onBlur:o,inputProps:{step:c.current,min:l.minValue,max:l.maxValue,type:"number","aria-labelledby":"input-slider"},style:{width:"100%"}})})]})})},N=function(e){let{brands:l,onBrandChange:a,models:i,onModelChange:s,sources:t,onSourceChange:u,cities:h,onCityChange:m,secteurs:v,onSecteurChange:p,chips:g,onChipChange:x,sliders:b,onSliderChange:N,onSearchClick:f}=e,C=(0,o.useTranslations)();return(0,r.jsxs)("div",{className:"col-xl-4 order-xl-1 order-2",children:[(0,r.jsx)("div",{className:"filter-area mb-40",children:(0,r.jsx)("div",{className:"title-and-close-btn mb-20",children:(0,r.jsx)("h6",{children:"Filtres de recherche:"})})}),(0,r.jsxs)("div",{className:"product-sidebar",children:[(0,r.jsx)("div",{className:"product-widget mb-20 ".concat(n().gradientBackground),children:(0,r.jsxs)("div",{className:"check-box-item",children:[(0,r.jsx)("h6",{className:"product-widget-title mb-20",children:C("Labels.brand")}),(0,r.jsx)("div",{className:"checkbox-container",children:(0,r.jsx)(c,{options:l,onChoiceChange:a})})]})}),(0,r.jsx)("div",{className:"product-widget mb-20 ".concat(n().gradientBackground),children:(0,r.jsxs)("div",{className:"check-box-item",children:[(0,r.jsx)("h6",{className:"product-widget-title mb-20",children:C("Labels.model")}),(0,r.jsx)("div",{className:"checkbox-container",children:(0,r.jsx)(c,{options:i,onChoiceChange:s})})]})}),b.map((e,l)=>(0,r.jsx)("div",{className:"product-widget mb-20 ".concat(n().gradientBackground),children:(0,r.jsxs)("div",{className:"check-box-item",children:[(0,r.jsx)("h6",{className:"product-widget-title mb-20",children:C("Labels."+e.label)}),(0,r.jsx)("div",{className:"checkbox-container",children:(0,r.jsx)(j,{options:e,onSliderChange:N})})]})})),g.map((e,l)=>(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{className:"product-widget mb-20 ".concat(n().gradientBackground),children:(0,r.jsxs)("div",{className:"check-box-item",children:[(0,r.jsx)("h6",{className:"product-widget-title mb-20",children:C("Labels."+e.label)}),(0,r.jsx)("div",{className:"checkbox-container",children:(0,r.jsx)(d,{options:e,onChipChange:x})})]})})})),(0,r.jsx)("button",{className:"primary-btn2",onClick:f,children:C("Common.search")})]})]})}},7284:function(e,l,a){"use strict";a.r(l),a.d(l,{__N_SSG:function(){return f},default:function(){return C}});var r=a(5893),i=a(7294),s=a(2962),n=a(2694);a(5671);var t=a(1163),c=a(9824),o=a(2505),d=a(1664),u=a.n(d),h=a(7066),m=a(4640);let v=(e,l)=>{var a,r,i,s;return l?{...e,id:e.id,label:e.carLabel,uri:e.carUri,price:e.carMinPrice||e.carMaxPrice||"N/A",image:e.carDefaultImage,brand:e.carBrand,model:e.carModel,fuel:(null===(a=e.raw)||void 0===a?void 0:a.fuel)||"N/A",electric:(null===(r=e.raw)||void 0===r?void 0:r.electric)||"N/A",mileage:null,city:null}:{...e,id:e.id,label:e.label,uri:e.carUri,price:e.carPrice,image:e.carDefautlImage,brand:e.carBrand,model:e.carModel,fuel:(null===(i=e.carFuel)||void 0===i?void 0:i.value)||"N/A",electric:e.carElectric||"N/A",mileage:"".concat(e.carMileageMin," - ").concat(e.carMileageMax," miles"),city:(null===(s=e.carCity)||void 0===s?void 0:s.label)||"Unknown city"}},p=(e,l)=>{let a=[];for(let i=0;i<e[0].valeurs.length;i++){var r;a.push({label:null!==(r=e[0].valeurs[i].translations[l])&&void 0!==r?r:e[0].valeurs[i].value,value:e[0].id+"|"+e[0].valeurs[i].id+"|"+e[0].valeurs[i].key})}return a.sort((e,l)=>e.label.toLowerCase().localeCompare(l.label.toLowerCase(),void 0,{sensitivity:"base"})),a.unshift({label:"Tout",value:0}),{critereon:{id:e.id,label:e.label},valeurs:a}},g=(e,l)=>{let a=[];for(let s=0;s<e.valeurs.length;s++){var r,i;a.push({label:null!==(i=null!==(r=e.valeurs[s].translations[l])&&void 0!==r?r:e.valeurs[s].translations.fr)&&void 0!==i?i:e.valeurs[s].value,value:e.id+"|"+e.valeurs[s].id+"|"+e.valeurs[s].key})}return a.sort((e,l)=>e.label.toLowerCase().localeCompare(l.label.toLowerCase(),void 0,{sensitivity:"base"})),a.unshift({label:"Tout",value:0}),{critereon:{id:e.id,label:e.label},valeurs:a}},x=(e,l)=>{let a=[];for(let i=0;i<e.length;i++){var r;a.push({label:null!==(r=e[i].translations[l])&&void 0!==r?r:e[i].label,value:e[i].id})}return a.unshift({label:"Tout",value:0}),a},b=e=>{let l=[];for(let r=0;r<e.length;r++){var a;l.push({label:null!==(a=function(e){if(e.length<4)return null;let l=e.match(/^https?\:\/\/([^\/?#]+)(?:[\/?#]|$)/i);return l?l[1]:null}(e[r].url))&&void 0!==a?a:e[r].label,value:e[r].id})}return l.sort((e,l)=>e.label.toLowerCase().localeCompare(l.label.toLowerCase(),void 0,{sensitivity:"base"})),l.unshift({label:"Tout",value:0}),l},j=e=>{let l=[];for(let a=0;a<e.length;a++)l.push({label:e[a].label,valeurs:e[a].valeurs,id:e[a].id,defaultValue:e[a].defaultValue});return l},N=e=>{let l=[];for(let a=0;a<e.length;a++){let r=[];if(e[a].rangeValues){e[a].rangeValues.sort((e,l)=>e-l),r.splice(0,r.length);for(let l=0;l<e[a].rangeValues.length;l++){let i=e[a].rangeValues[l];r.push({label:i,value:l+"$"+Math.random()})}}r=r.reverse(),l.push({label:e[a].label,minValue:parseInt(e[a].minValue),maxValue:parseInt(e[a].maxValue),rangeValues:r,id:e[a].id})}return l};var f=!0,C=function(e){var l;let{productId:a,brands:d,sources:f,cities:C,sliders:w,chips:y}=e,L=(0,m.useLocale)();(0,m.useTranslations)(),d=p(d,L),f=b(f),C=x(C,L),w=N(w),y=j(y);let[k,S]=(0,i.useState)([]),[V,U]=(0,i.useState)("grid-group-wrapper"),[E,M]=(0,i.useState)([]),P=(0,i.useRef)({}),{setCar:T}=(0,o.o)(),A=(0,t.useRouter)(),Z=null!==(l=A.query.page)&&void 0!==l?l:0,R="new"===A.query.condition?"New Car":"Used Car";(0,i.useEffect)(()=>{let e=A.query.alert,l=async()=>{try{let l=await (0,c.cf)(R,e,Z),a="New Car"===R,r=Array.isArray(l)?l:Object.keys(l).map(e=>l[e]),i=r.map(e=>v(e,a));M(i||[])}catch(e){console.error("Error loading cars",e),M([])}};l()},[A.query]);let _=e=>{if(e>=0){let l={...A.query,page:e};A.push({pathname:A.pathname,query:l},void 0,{shallow:!1})}},q=e=>{var l;T(e),console.log("car to show",e),A.push({pathname:"/car-deatils",query:{id:e.id,condition:null!==(l=A.query.condition)&&void 0!==l?l:"used"}})};async function B(e){var l;let r=await (0,c.yC)(a,P.current,"search"+crypto.randomUUID(),R);if(console.log("newAlert",r),null==r?void 0:null===(l=r.data)||void 0===l?void 0:l.id){let e={condition:A.query.condition,alert:r.data.id,page:0};e!=A.query&&A.push({pathname:A.pathname,query:e},void 0,{shallow:!1})}}return E.slice((Z-1)*10,10*Z),(0,r.jsx)(s.Z,{children:(0,r.jsx)("div",{className:"product-page pt-50 mb-50",children:(0,r.jsx)("div",{className:"container",children:(0,r.jsxs)("div",{className:"row g-xl-4 gy-5",children:[(0,r.jsx)(n.Z,{brands:d,onBrandChange:(e,l)=>{P.current={...P.current,valueName:l.value,valueNameLabel:l.label,valueNameModel:void 0,valueNameModelLabel:void 0},console.log("CURRENT VALUES : ",P.current),function(){if(P.current.valueName&&P.current.valueName.length>1){let e=P.current.valueName.split("|")[1];h.Z.get("/api/valeurs/comboListParent/".concat(e)).then(e=>{console.log("modelsss",e.data);let l=g(e.data,L);S(l)})}}()},models:k,onModelChange:(e,l)=>{P.current={...P.current,valueNameModel:l.value,valueNameModelLabel:l.label},console.log("CURRENT VALUES : ",P.current)},cities:C,onCityChange:(e,l)=>{P.current={...P.current,valueLocationCity:l.value,valueLocationCityLabel:l.label,valueLocationSectLabel:void 0,valueLocationSect:void 0},console.log("CURRENT VALUES : ",P.current)},secteurs:[],onSecteurChange:(e,l)=>{P.current={...P.current,valueLocationSect:l.value,valueLocationSectLabel:l.label},console.log("CURRENT VALUES : ",P.current)},chips:y,onChipChange:(e,l)=>{P.current={...P.current,[e.id+"|"+e.label]:0!=l.id?l.key+"&"+l.value+"&"+l.id:void 0},console.log("CURRENT VALUES : ",P.current)},sliders:w,onSliderChange:(e,l)=>{P.current={...P.current,[e.id+"|"+e.label+"_max"]:l[1]?l[1]+"&"+l[1]:void 0,[e.id+"|"+e.label+"_min"]:l[0]?l[0]+"&"+l[0]:void 0}},onSearchClick:B}),(0,r.jsxs)("div",{className:"col-xl-8 order-xl-2 order-1",children:[(0,r.jsx)("div",{className:"row mb-40",children:(0,r.jsx)("div",{className:"col-lg-12",children:(0,r.jsx)("div",{className:"show-item-and-filte",children:(0,r.jsx)("div",{className:"filter-view",children:(0,r.jsx)("div",{className:"view",children:(0,r.jsxs)("ul",{className:"btn-group list-grid-btn-group",children:[(0,r.jsx)("li",{className:"".concat("grid-group-wrapper"===V?"active":""," grid"),onClick:()=>U("grid-group-wrapper")}),(0,r.jsx)("li",{className:"".concat("list-group-wrapper"===V?"active":""," lists"),onClick:()=>U("list-group-wrapper")})]})})})})})}),(0,r.jsx)("div",{className:"list-grid-main",children:(0,r.jsxs)("div",{className:"list-grid-product-wrap ".concat(V),children:[(0,r.jsx)("div",{className:"row g-4 justify-content-center mb-40",children:E.length>0?E.map((e,l)=>(0,r.jsx)("div",{className:"col-lg-6 col-md-6 col-sm-12 wow fadeInUp item","data-wow-delay":"".concat(200+100*l,"ms"),children:(0,r.jsxs)("div",{className:"product-card",children:[(0,r.jsxs)("div",{className:"product-img",children:[(0,r.jsx)("a",{href:"#",className:"fav"}),(0,r.jsx)("div",{className:"swiper product-img-slider",children:(0,r.jsx)("div",{className:"swiper-wrapper",children:(0,r.jsx)("div",{className:"swiper-slide",children:e.image?(0,r.jsx)("img",{src:e.image,alt:"image",style:{height:"400px",width:"100%",objectFit:"cover"}}):(0,r.jsx)("div",{style:{height:"400px",width:"100%",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"#f0f0f0"},children:(0,r.jsx)("span",{children:"Image not available"})})})})})]}),(0,r.jsxs)("div",{className:"product-content",children:[(0,r.jsx)("h5",{children:(0,r.jsx)("a",{onClick:()=>q(e),children:e.label||"No label available"})}),(0,r.jsxs)("div",{className:"price-location",children:[(0,r.jsx)("div",{className:"price",children:(0,r.jsxs)("strong",{children:["$",e.price]})}),(0,r.jsx)("div",{className:"location",children:(0,r.jsxs)("a",{href:"#",children:[(0,r.jsx)("i",{className:"bi bi-geo-alt"})," ",e.city]})})]}),(0,r.jsxs)("ul",{className:"features",children:["Used Car"===R&&e.mileage&&(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("li",{children:[(0,r.jsx)("img",{src:"assets/img/home4/icon/miles.svg",alt:""}),e.mileage]})}),e.fuel&&(0,r.jsxs)("li",{children:[(0,r.jsx)("img",{src:"assets/img/home4/icon/fuel.svg",alt:""}),e.fuel]}),e.electric&&(0,r.jsxs)("li",{children:[(0,r.jsx)("img",{src:"assets/img/home4/icon/electric.svg",alt:""}),e.electric]})]}),(0,r.jsxs)("div",{className:"content-btm",children:[(0,r.jsx)("a",{className:"view-btn2",onClick:()=>q(e),children:"View Details"}),(0,r.jsx)("div",{className:"brand",children:(0,r.jsx)(u(),{href:"/single-brand-category",children:(0,r.jsx)("img",{src:"assets/img/home1/icon/mercedes-01.svg",alt:"image"})})})]})]})]})},e.id)):(0,r.jsx)("p",{children:"No cars available."})}),(0,r.jsx)("div",{className:"pagination-and-next-prev",children:(0,r.jsx)("div",{className:"next-prev-btn",children:(0,r.jsxs)("ul",{children:[(0,r.jsx)("li",{children:(0,r.jsx)("button",{className:"primary-btn3",onClick:()=>_(Z-1),children:"Prev"})}),(0,r.jsx)("li",{children:(0,r.jsx)("button",{className:"primary-btn3",onClick:()=>_(Z+1),children:"Next"})})]})})})]})})]})]})})})})}},8615:function(e){e.exports={gradientBackground:"CarLeftSidebar_gradientBackground__AQfme"}}}]);